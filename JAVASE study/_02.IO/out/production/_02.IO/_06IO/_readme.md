# 字符流

字符流的底层其实就是字节流，字符流 = 字节流 + 字符集



## 1.特点

输入流：依次读取一个字节，遇到中文的时候，一次读多个字节。

输出流：底层会把数据按照指定的编码方式进行编码，变成字节再写到文件中。

使用场景：纯文本文件的操作



## 2.FileReader

### 2.1.创造字符输入流对象

```
public FileReader(File file)
public FIleReader(String pathname)
文件不存在则直接报错。
```



### 2.2.读取数据

```
public int read()
按字节进行读取，读到中文，一次读取多个字节，最后解码，返回一个整数，所以就约等于一次读取一个字符。
public int read(char[] buffer)
一次读多个数据。

读取数据，读到文件末尾返回-1.
```



### 2.3.释放资源



## 3.FileWriter

```
public FileWriter()
```

![image-20240927150840728](C:\Users\周鹏\AppData\Roaming\Typora\typora-user-images\image-20240927150840728.png)

![image-20240927150852995](C:\Users\周鹏\AppData\Roaming\Typora\typora-user-images\image-20240927150852995.png)

其他细节和FileReader相同。



## 4.字符流原理

### 4.1.字符输入流的底层

- 创建字符输入流对象，底层：关联文件，并创建缓冲区（长度为8192的字节数组）。
- 读取数据，底层：先判断缓冲区是否有数据可以读取，缓冲区没有数据时，就从文件中获取数据，装到缓冲区中，每次尽可能装满缓冲区，如果文件中也没有了就返回-1，若缓冲区有数据，就直接在缓冲区读取。



### 4.2.字符输出流的底层

- 同样有一个长度为8192的字节数组存储，写入的字符，要将缓冲区的数据存入目的地，有三个种情况：1.缓冲区装满了，2.flush手动刷新缓冲区，3.close关流。